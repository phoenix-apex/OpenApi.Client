# .NET / C# Mita.Notifications.Client
This is a .NET / C# REST API client

* For the [MITA Notifications REST API](https://notifications-api.gov.mt/swagger/index.html)
* auto-generated by [OpenAPI Generator](https://openapi-generator.tech)
* using the [OpenAPI definitions](https://notifications-api.gov.mt/swagger/v1/swagger.json) provided by MITA

## Documentation for API Endpoints

* Official documentation: [MITA Notifications](https://mita.gov.mt/portfolio/information-systems/notifications-platform/)
* Generated Swagger UI: [Swagger Editor](https://editor.swagger.io/?url=https://notifications-api.gov.mt/swagger/v1/swagger.json)

## Installation
Install from NuGet package
```powershell
Install-Package Mita.Notifications.Client
```

## Getting Started

### Method names

Method names are humanized:

`GET` on path `/api/v1/key` becomes `ApiV1KeyGet(Async)`<br>
`POST` on path `/api/v1/messages` becomes `PostApiV1Messages(Async)`

## Sample code

### Create config to use for authentication

```csharp
var config = new Configuration {
    Key = apiKey,
    Secret = apiSecret,
};
```

### Create a message / notification

With the config opbject created above, you can now create a message / notification

```csharp
const string requestContent = """
                              {"ClientReference":"1ec867c3-bea6-46a3-8c40-7601c1779b79","MessageType":"sms","MessagePriority":"100","SenderId":"b2afc17b-ff7f-4982-80f4-36078a952aa7","CallbackUrl":null,"ScheduledDeliveryDate":"2024-04-13T02:00:00+02:00","Contacts":[{"DisplayName":"Test Contact 1","Title":null,"FirstName":"First Name 1","LastName":"Last Name 1","Email":"test1@gov.domain","MobileNo":"00263779960053","PreferredLanguage":"en"}],"MessageContent":[{"Language":"en","Subject":"Test Email Subject in English","MessageBody":"Email Body in English"},{"Language":"mt","Subject":"Test Suġġett bl-Malti","MessageBody":"Kontenut tal-email bil-Malti"}]}
                              """;

var payload = JsonConvert.DeserializeObject<CreateMessageRequest>(requestContent);
var messagesApi = new MessagesApi(config); // config object created above
var inboundMessageBatch = await messagesApi.PostApiV1MessagesAsync(payload);
Console.WriteLine(inboundMessageBatch?.ToJson());
```
### Renew API Key
To mitigate any security risks, as explained in the previous section, the Notifications System does 
not generate long-lived Secret Keys. The shared Secret Key between the client application and the 
Notifications API needs to be changed from time to time. By default, the Secret Key remains valid 
for a period of seven days (maximum three months) and any API call performed using an expired key 
will result in a `HTTP Error 205 Reset Content`, with a message saying that the Secret Key is 
expired. <br>To refresh the API Key, you can do this from either the Notifications Portal -> API Key 
Manager, where the key needs to be updated manually, or by invoking the `GET api/v1/key` API 
endpoint. <br>It is suggested that latter method is to be implemented.

```csharp
var config = new Configuration {
    Key = apiKey,
    Secret = apiSecret,
};

var keysApi = new APIKeyApi(config);
var keys = await keysApi.GetApiV1KeyAsync();
Console.WriteLine(keys?.ToJson());
```

## Documentation for API Endpoints

| Endpoint | Documentation |
|------------|---------------|
| ApiKeyApi | [ApiKeyApi](./docs/ApiKeyApi.md) |
| AttachmentApi | [AttachmentApi](./docs/AttachmentApi.md) |
| InboundMessagesApi | [InboundMessagesApi](./docs/InboundMessagesApi.md) |
| MessageBatchApi | [MessageBatchApi](./docs/MessageBatchApi.md) |
| MessagePricingApi | [MessagePricingApi](./docs/MessagePricingApi.md) |
| MessagesApi | [MessagesApi](./docs/MessagesApi.md) |
| SubscribersApi | [SubscribersApi](./docs/SubscribersApi.md) |
| SubscriptionsContactGroupsApi | [SubscriptionsContactGroupsApi](./docs/SubscriptionsContactGroupsApi.md) |
| MessageSchedulingApi | [MessageSchedulingApi](./docs/MessageSchedulingApi.md) |

## Documentation for Models

| Model Name | Documentation |
|------------|---------------|
| ApiKey | [ApiKey](./docs/ApiKey.md) |
| Attachment | [Attachment](./docs/Attachment.md) |
| CalculateMessageCost | [CalculateMessageCost](./docs/CalculateMessageCost.md) |
| Contact | [Contact](./docs/Contact.md) |
| CreateGroupRequest | [CreateGroupRequest](./docs/CreateGroupRequest.md) |
| CreateMessageGroupRequest | [CreateMessageGroupRequest](./docs/CreateMessageGroupRequest.md) |
| CreateMessageRequest | [CreateMessageRequest](./docs/CreateMessageRequest.md) |
| CreateSubscriptionRequest | [CreateSubscriptionRequest](./docs/CreateSubscriptionRequest.md) |
| CreateSubscriberRequest | [CreateSubscriberRequest](./docs/CreateSubscriberRequest.md) |
| DeliveryReport | [DeliveryReport](./docs/DeliveryReport.md) |
| DeliveryReports | [DeliveryReports](./docs/DeliveryReports.md) |
| Encoding | [Encoding](./docs/Encoding.md) |
| Group | [Group](./docs/Group.md) |
| Error | [Error](./docs/Error.md) |
| InboundMessage | [InboundMessage](./docs/InboundMessage.md) |
| InboundMessageBatch | [InboundMessageBatch](./docs/InboundMessageBatch.md) |
| InboundMessages | [InboundMessages](./docs/InboundMessages.md) |
| InboundMessageStatus | [InboundMessageStatus](./docs/InboundMessageStatus.md) |
| Language | [Language](./docs/Language.md) |
| MessageBatch | [MessageBatch](./docs/MessageBatch.md) |
| MessageContent | [MessageContent](./docs/MessageContent.md) |
| MessagePriority | [MessagePriority](./docs/MessagePriority.md) |
| MessageReceipt | [MessageReceipt](./docs/MessageReceipt.md) |
| MessageRequest | [MessageRequest](./docs/MessageRequest.md) |
| MessageStatus | [MessageStatus](./docs/MessageStatus.md) |
| MessageType | [MessageType](./docs/MessageType.md) |
| Page | [Page](./docs/Page.md) |
| ProblemDetails | [ProblemDetails](./docs/ProblemDetails.md) |
| Salutation | [Salutation](./docs/Salutation.md) |
| SortDirection | [SortDirection](./docs/SortDirection.md) |
| Subscriber | [Subscriber](./docs/Subscriber.md) |
| Subscribers | [Subscribers](./docs/Subscribers.md) |
| UpdateMessageBatchRequest | [UpdateMessageBatchRequest](./docs/UpdateMessageBatchRequest.md) |
| UpdateMessageRequest | [UpdateMessageRequest](./docs/UpdateMessageRequest.md) |
| UpdateScheduledMessageRequest | [UpdateScheduledMessageRequest](./docs/UpdateScheduledMessageRequest.md) |
| UpdateSubscriberGroupRequest | [UpdateSubscriberGroupRequest](./docs/UpdateSubscriberGroupRequest.md) |
| Validation | [Validation](./docs/Validation.md) |
